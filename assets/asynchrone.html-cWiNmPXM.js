import{_ as r}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as h,a as i,d,e as c,w as n,r as o,o as p,b as e}from"./app-BAh56Bn-.js";const k={};function u(g,s){const l=o("Tabs");return p(),h("div",null,[s[4]||(s[4]=i("h1",{id:"pourquoi-l-asynchrone-en-sqlalchemy",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#pourquoi-l-asynchrone-en-sqlalchemy"},[i("span",null,"Pourquoi l'Asynchrone en SQLAlchemy ?")])],-1)),s[5]||(s[5]=i("h2",{id:"🤔-le-probleme-du-synchrone",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#🤔-le-probleme-du-synchrone"},[i("span",null,"🤔 Le problème du synchrone")])],-1)),s[6]||(s[6]=i("p",null,"Dans une application web classique avec SQLAlchemy synchrone, chaque requête HTTP bloque complètement le thread pendant l'attente de la base de données :",-1)),d(l,{data:[{id:"Synchrone - Bloquant"},{id:"Asynchrone - Non-bloquant"}]},{title0:n(({value:a,isActive:t})=>[...s[0]||(s[0]=[e("Synchrone - Bloquant",-1)])]),title1:n(({value:a,isActive:t})=>[...s[1]||(s[1]=[e("Asynchrone - Non-bloquant",-1)])]),tab0:n(({value:a,isActive:t})=>[...s[2]||(s[2]=[i("div",{class:"language-python line-numbers-mode","data-highlighter":"shiki","data-ext":"python",style:{"--shiki-light":"#383A42","--shiki-dark":"#abb2bf","--shiki-light-bg":"#FAFAFA","--shiki-dark-bg":"#282c34"}},[i("pre",{class:"shiki shiki-themes one-light one-dark-pro vp-code"},[i("code",{class:"language-python"},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"def"),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}}," get_user"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#986801","--shiki-light-font-style":"inherit","--shiki-dark":"#D19A66","--shiki-dark-font-style":"italic"}},"user_id"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},":"),i("span",{style:{"--shiki-light":"#0184BC","--shiki-dark":"#56B6C2"}}," str"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"):")]),e(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"    user "),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#56B6C2"}},"="),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," session."),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#61AFEF"}},"query"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(User)."),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#61AFEF"}},"filter"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(User.id "),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#56B6C2"}},"=="),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," user_id)."),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#61AFEF"}},"first"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"()  "),i("span",{style:{"--shiki-light":"#A0A1A7","--shiki-light-font-style":"italic","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}},"# 🔴 Thread bloqué")]),e(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"    return"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," user")]),e(`
`),i("span",{class:"line"}),e(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A0A1A7","--shiki-light-font-style":"italic","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}},"# Si la DB met 100ms à répondre :")]),e(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A0A1A7","--shiki-light-font-style":"italic","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}},"# - 1 requête = 1 thread occupé pendant 100ms")]),e(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A0A1A7","--shiki-light-font-style":"italic","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}},"# - 10 requêtes simultanées = 10 threads occupés")]),e(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A0A1A7","--shiki-light-font-style":"italic","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}},"# - Limite : ~50-200 connexions concurrentes max")])])]),i("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"})])],-1)])]),tab1:n(({value:a,isActive:t})=>[...s[3]||(s[3]=[i("div",{class:"language-python line-numbers-mode","data-highlighter":"shiki","data-ext":"python",style:{"--shiki-light":"#383A42","--shiki-dark":"#abb2bf","--shiki-light-bg":"#FAFAFA","--shiki-dark-bg":"#282c34"}},[i("pre",{class:"shiki shiki-themes one-light one-dark-pro vp-code"},[i("code",{class:"language-python"},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"async"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}}," def"),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}}," get_user"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#986801","--shiki-light-font-style":"inherit","--shiki-dark":"#D19A66","--shiki-dark-font-style":"italic"}},"user_id"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},":"),i("span",{style:{"--shiki-light":"#0184BC","--shiki-dark":"#56B6C2"}}," str"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"):")]),e(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"    result "),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#56B6C2"}},"="),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}}," await"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," db."),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#61AFEF"}},"execute"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#61AFEF"}},"select"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(User)."),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#61AFEF"}},"where"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"(User.id "),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#56B6C2"}},"=="),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," user_id))  "),i("span",{style:{"--shiki-light":"#A0A1A7","--shiki-light-font-style":"italic","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}},"# 🟢 Thread libéré pendant l'attente")]),e(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"    return"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," result."),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#61AFEF"}},"scalars"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"()."),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#61AFEF"}},"first"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"()")]),e(`
`),i("span",{class:"line"}),e(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A0A1A7","--shiki-light-font-style":"italic","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}},"# Si la DB met 100ms à répondre :")]),e(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A0A1A7","--shiki-light-font-style":"italic","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}},"# - 1 requête = 1 thread libéré pendant 100ms")]),e(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A0A1A7","--shiki-light-font-style":"italic","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}},"# - 1000 requêtes simultanées = 1 seul thread nécessaire")]),e(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A0A1A7","--shiki-light-font-style":"italic","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}},"# - Limite : ~10 000+ connexions concurrentes")])])]),i("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"})])],-1)])]),_:1}),s[7]||(s[7]=c(`<h2 id="⚡-les-gains-concrets" tabindex="-1"><a class="header-anchor" href="#⚡-les-gains-concrets"><span>⚡ Les gains concrets</span></a></h2><h3 id="📊-performance" tabindex="-1"><a class="header-anchor" href="#📊-performance"><span>📊 Performance</span></a></h3><div class="hint-container tip"><p class="hint-container-title">Amélioration typique</p><ul><li><strong>x10 à x50</strong> plus de requêtes simultanées</li><li><strong>-80% d&#39;utilisation CPU</strong> pour les I/O</li><li><strong>-90% d&#39;utilisation RAM</strong> (moins de threads)</li><li><strong>Latence réduite</strong> sous forte charge</li></ul></div><h3 id="🎯-cas-d-usage-hyperion" tabindex="-1"><a class="header-anchor" href="#🎯-cas-d-usage-hyperion"><span>🎯 Cas d&#39;usage Hyperion</span></a></h3><p><strong>Avant (synchrone) :</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>50 utilisateurs qui consultent leurs événements simultanément</span></span>
<span class="line"><span>→ 50 threads Python actifs</span></span>
<span class="line"><span>→ Serveur surchargé à 50 utilisateurs</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Après (asynchrone) :</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>500 utilisateurs qui consultent leurs événements simultanément</span></span>
<span class="line"><span>→ 1-2 threads Python actifs</span></span>
<span class="line"><span>→ Serveur fluide même à 500 utilisateurs</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="🧠-principe-simplifie" tabindex="-1"><a class="header-anchor" href="#🧠-principe-simplifie"><span>🧠 Principe simplifié</span></a></h2><p>L&#39;asynchrone, c&#39;est comme un serveur de restaurant efficace :</p><p>::: code-group</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-text"><span class="line"><span>1. Prendre commande table 1</span></span>
<span class="line"><span>2. Aller en cuisine et ATTENDRE le plat ⏰</span></span>
<span class="line"><span>3. Revenir avec le plat</span></span>
<span class="line"><span>4. Prendre commande table 2</span></span>
<span class="line"><span>5. Aller en cuisine et ATTENDRE le plat ⏰</span></span>
<span class="line"><span>→ 1 table servie toutes les 10 minutes</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-text"><span class="line"><span>1. Prendre commande table 1</span></span>
<span class="line"><span>2. Donner commande en cuisine (sans attendre)</span></span>
<span class="line"><span>3. Prendre commande table 2</span></span>
<span class="line"><span>4. Prendre commande table 3</span></span>
<span class="line"><span>5. Récupérer plat table 1 (prêt)</span></span>
<span class="line"><span>6. Continuer...</span></span>
<span class="line"><span>→ 10 tables servies en 10 minutes</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>:::</p><h2 id="🎯-quand-utiliser-l-asynchrone" tabindex="-1"><a class="header-anchor" href="#🎯-quand-utiliser-l-asynchrone"><span>🎯 Quand utiliser l&#39;asynchrone ?</span></a></h2><div class="hint-container tip"><p class="hint-container-title">Asynchrone recommandé pour</p><ul><li><strong>Applications web</strong> (FastAPI, Django Async)</li><li><strong>APIs REST</strong> avec beaucoup de trafic</li><li><strong>Microservices</strong> qui font des appels externes</li><li><strong>Applications avec I/O intensives</strong> (DB, fichiers, réseau)</li></ul></div><div class="hint-container warning"><p class="hint-container-title">Asynchrone non nécessaire pour</p><ul><li><strong>Scripts de batch</strong> simples</li><li><strong>Applications avec très peu d&#39;utilisateurs</strong> (&lt;10 simultanés)</li><li><strong>Calculs intensifs</strong> (CPU-bound)</li></ul></div><h2 id="🔄-migration-en-une-phrase" tabindex="-1"><a class="header-anchor" href="#🔄-migration-en-une-phrase"><span>🔄 Migration en une phrase</span></a></h2><p>Remplacez <code>session.query()</code> par <code>await db.execute(select())</code> et ajoutez <code>async</code>/<code>await</code> partout.</p><p><strong>Résultat :</strong> Votre application Hyperion peut servir 10x plus d&#39;utilisateurs simultanés avec les mêmes ressources serveur.</p>`,20))])}const A=r(k,[["render",u]]),b=JSON.parse(`{"path":"/hyperion/common/sqlalchemy/asynchrone.html","title":"L'Asynchrone","lang":"fr-FR","frontmatter":{"title":"L'Asynchrone","description":"Explication synthétique de l'intérêt de l'asynchrone en SQLAlchemy","order":3,"category":["Guide","SQLAlchemy"],"tag":["asynchrone","performance","base de données"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"L'Asynchrone\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-09-15T11:44:46.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Aeecleclair\\",\\"url\\":\\"https://github.com/aeecleclair/\\"}]}"],["meta",{"property":"og:url","content":"https://docs.myecl.fr/hyperion/common/sqlalchemy/asynchrone.html"}],["meta",{"property":"og:site_name","content":"MyECL - ÉCLAIR"}],["meta",{"property":"og:title","content":"L'Asynchrone"}],["meta",{"property":"og:description","content":"Explication synthétique de l'intérêt de l'asynchrone en SQLAlchemy"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"fr-FR"}],["meta",{"property":"og:updated_time","content":"2025-09-15T11:44:46.000Z"}],["meta",{"property":"article:tag","content":"base de données"}],["meta",{"property":"article:tag","content":"performance"}],["meta",{"property":"article:tag","content":"asynchrone"}],["meta",{"property":"article:modified_time","content":"2025-09-15T11:44:46.000Z"}]]},"git":{"createdTime":1757922505000,"updatedTime":1757936686000,"contributors":[{"name":"warix8","username":"warix8","email":"39554785+warix8@users.noreply.github.com","commits":1,"url":"https://github.com/warix8"},{"name":"Marc-Andrieu","username":"Marc-Andrieu","email":"marc.andrieu@outlook.com","commits":1,"url":"https://github.com/Marc-Andrieu"}]},"readingTime":{"minutes":2.77,"words":416},"filePathRelative":"hyperion/common/sqlalchemy/asynchrone.md"}`);export{A as comp,b as data};
